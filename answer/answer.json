{
	"$schema": "http://json-schema.org/draft/2019-09/schema#",
	"$id": "https://github.com/dedis/student20_pop/tree/proto-specs/answer/answer.json",
	"title": "Match a custom JsonRpc 2.0 message answer",
	"description": "Match a positive or negative server answer",
	"type": "object",

	"properties": {
		"jsonrpc": { "description": "[String] JsonRpc version", "const": "2.0", "$comment": "should always be \"2.0\"" },
		"result": { 
			"description": "In case of positive answer, result of the client query",
			"oneOf": [
				{ "$ref": "positiveAnswer/positiveAnswerGeneral.json" },
				{ "$ref": "positiveAnswer/positiveAnswerCatchup.json" }
			],
			"$comment": "Note: this field is absent if the answer is negative"
		},
		"error": {
			"description": "In case of negative answer, error generated by the client query",
			"$ref": "negativeAnswer/error.json"
		},
		"id": { 
			"type": "integer",
			"$comment": "The id match the request id. If there was an error in detecting the id, it must be Null"
		      }
	},
	"additionalProperties": false,
	"allOf": [
		{ "required": ["jsonrpc", "id"] },
		{ 
			"oneOf": [
				{ "required": ["result"] },
				{ "required": ["error"] }
			] 
		}
	],
	"$comment": "Note: required fields: (\"jsonrpc\" \\and (\"result\" \\or \"error\") \\and \"id\")"
}
